# ⏰ timed_task-rust

一个用 Rust 编写的定时任务工具，类似于 Linux 下的 cronie。支持定时执行命令，并自动附带当前用户的环境变量，无需担心因环境或权限导致的执行异常。

## 项目简介

timed_task-rust 是一个专注于简单易用和环境一致性的定时任务调度工具。它会持续监控配置文件的变化，实现“热加载”；每次执行命令时，都会继承当前用户的环境变量，确保与手动执行体验一致，避免传统 cron/cronie 因环境变量丢失导致的问题。

## 主要特性

- 🦀 纯 Rust 实现，性能高效，稳定可靠
- 📝 类 crontab 的配置文件格式，容易上手
- 🔄 配置文件热加载，修改后自动生效
- 🧑‍💻 执行命令时自动继承当前用户环境
- 🚦 每分钟调度一次，适合绝大多数定时任务需求

## 使用方法

**配置定时任务**

配置文件默认路径为 `~/.config/time_event.datafile`，每行表示一个定时任务，格式类似。
  
## 示例配置

`*表示默认为0 若全为*这么表示每分钟执行一次`
```
1 2 3 /home/user/script.sh  # 每过 3 天 2 小时 1 分钟 执行脚本
5 * * /home/user/script.sh
```

## 工作机制

- 程序启动后会监控配置文件变化，实现“热加载”。  
- 每分钟检查所有任务，如果当前时间与任务设定的时间匹配，就用当前用户环境执行命令。  
- 所有命令都会继承你用户的环境变量（比如 PATH、PYTHONPATH 等），无需担心因缺失环境变量或权限导致任务失败。  

## 注意事项

- 配置文件路径默认是 `~/.config/time_event.datafile`，如需更改可自行调整源码。  
- 命令行会用当前 shell 执行（读取 SHELL 环境变量，未设置则默认 `/bin/sh`）。  
- 当前仅支持分钟级调度，适合绝大多数基本定时需求。  
- 该项目只支持在启动后的时间记数来运行脚本例如启动后每过1天10分钟运行一次不支持设置特定时间运行脚本   
- 该项目因为实现问题只能运行脚本文件如果运行命令会导致所有参数无法生效但命令可以运行  
